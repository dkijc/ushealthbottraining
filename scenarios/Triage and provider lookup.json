{"id":"5a5ad9ac-aa87-43d7-9f0b-59acb01d8089","name":"triage and provider lookup","scenario_trigger":"TriageAndProviderLookup","description":"Triage flow and then provider lookup","active":true,"updated":"2019-01-16T22:32:51.347Z","userDisplayName":"Oren Barnea","code":"{\"version\":3,\"steps\":[{\"id\":\"2a413cb11c04-cd61e640859bd235-39f7\",\"type\":\"prompt\",\"dataType\":\"string\",\"designer\":{\"xLocation\":672,\"yLocation\":20,\"next\":\"9ff8ebbcf94e-bd222e9b1f4c8cad-922d\"},\"text\":\"What brings you here today? \\r\\nPlease describe the problem so the nurse is ready to help.\",\"variable\":\"complaint\",\"label\":\"Complaint\",\"stringId\":\"stringId_d77601961c9635db\"},{\"id\":\"9ff8ebbcf94e-bd222e9b1f4c8cad-922d\",\"type\":\"beginScenario\",\"designer\":{\"xLocation\":680,\"yLocation\":66,\"next\":\"32470dd4536d-b9926104af17df7d-afd7\"},\"scenario\":\"/healthnavigator\",\"args\":\"// Pass hte complaint var as input to the built in trigae\\r\\n${complaint}\",\"variable\":\"results\",\"label\":\"Start triage\"},{\"id\":\"42bcc266ae24-4818a7f1d51a46c8-07ce\",\"type\":\"statement\",\"designer\":{\"xLocation\":593,\"yLocation\":228},\"text\":\"Get well soon !\\r\\nIf you have any further questions, please donâ€™t hesitate to contact me.\",\"layout\":\"vertical\",\"attachment\":[{\"type\":\"AdaptiveCard\",\"cardCode\":\"{\\n \\\"$schema\\\": \\\"http://adaptivecards.io/schemas/adaptive-card.json\\\",\\n \\\"type\\\": \\\"AdaptiveCard\\\",\\n \\\"version\\\": \\\"1.0\\\",\\n \\\"speak\\\": \\\"Your meeting about \\\\\\\"Adaptive Card design session\\\\\\\" is starting at 12:30pmDo you want to snooze or do you want to send a late notification to the attendees?\\\",\\n \\\"body\\\": [\\n {\\n \\\"type\\\": \\\"TextBlock\\\",\\n \\\"text\\\": \\\"Suggested care: \\\",\\n \\\"size\\\": \\\"large\\\",\\n \\\"weight\\\": \\\"bolder\\\"\\n },\\n {\\n \\\"type\\\": \\\"TextBlock\\\",\\n \\\"text\\\": ${results}.triage.recommendation,\\n \\\"isSubtle\\\": true,\\n \\\"spacing\\\": 'small',\\n \\\"size\\\": \\\"medium\\\",\\n },\\n {\\n \\\"type\\\": \\\"TextBlock\\\",\\n \\\"text\\\": '**Disposition rating:** ' + JSON.stringify(${results}.triage.rating) + ' out of 100',\\n \\\"isSubtle\\\": true,\\n \\\"spacing\\\": \\\"large\\\"\\n },\\n ],\\n \\\"actions\\\": [\\n {\\n \\\"type\\\": \\\"Action.Submit\\\",\\n \\\"title\\\": \\\"Schedule with a doctor?\\\",\\n \\\"data\\\": {\\n \\\"x\\\": \\\"schedule\\\"\\n }\\n }\\n ]\\n}\"}],\"label\":\"Good bye\",\"stringId\":\"stringId_b55858c064d36bb5\"},{\"id\":\"32470dd4536d-b9926104af17df7d-afd7\",\"type\":\"branch\",\"condition\":\"// Low disposition is detected and recommendation would be self care at home,\\r\\n// suggest self care before connecting to the nurse line\\r\\n${results}.triage.rating >= 15\",\"designer\":{\"xLocation\":680,\"yLocation\":146,\"next\":\"42bcc266ae24-4818a7f1d51a46c8-07ce\"},\"targetStepId\":\"ff3a71879575-5ccbc400756a0b0b-a030\",\"label\":\"Disposition filter\"},{\"id\":\"ff3a71879575-5ccbc400756a0b0b-a030\",\"type\":\"yesnoprompt\",\"dataType\":\"boolean\",\"designer\":{\"xLocation\":740,\"yLocation\":180,\"next\":\"42bcc266ae24-4818a7f1d51a46c8-07ce\"},\"text\":\"Do you need help finding a provider?\",\"variable\":\"needHelpFindProvider\",\"stringId\":\"stringId_a5559537f10f2805\",\"targetStepId\":\"6b5c7bf1b73a-49fbbcb93f1e1ca9-7d2d\",\"label\":\"help finding provider\"},{\"id\":\"6b5c7bf1b73a-49fbbcb93f1e1ca9-7d2d\",\"type\":\"prompt\",\"dataType\":\"[\\\"Doctor\\\",\\\"Dentist\\\",\\\"Hospital\\\"]\",\"designer\":{\"xLocation\":794,\"yLocation\":240,\"listStyle\":3,\"next\":\"1a1b50978f49-c8b53d12ffcdd27f-2323\"},\"text\":\"What type of provider do you look for?\",\"variable\":\"doctor_type\",\"stringId\":\"stringId_7a08e1162759b620\",\"label\":\"provider type\"},{\"id\":\"1a1b50978f49-c8b53d12ffcdd27f-2323\",\"type\":\"prompt\",\"dataType\":\"[\\\"Cardiology\\\",\\\"Dermatology\\\",\\\"Endocrinology\\\",\\\"Pediatrics\\\"]\",\"designer\":{\"xLocation\":794,\"yLocation\":300,\"listStyle\":3,\"next\":\"bdb33ce395c9-ac2871155827d4d7-02c8\"},\"text\":\"Are you interested in a specific specialty of the doctor? Please select from the list below:\",\"variable\":\"specialties\",\"stringId\":\"stringId_4824d909a66f6bce\",\"label\":\"doctor type\"},{\"id\":\"bdb33ce395c9-ac2871155827d4d7-02c8\",\"type\":\"prompt\",\"dataType\":\"[\\\"No\\\",\\\"Yes - Female\\\",\\\"Yes - Male\\\"]\",\"designer\":{\"xLocation\":794,\"yLocation\":353,\"listStyle\":3,\"next\":\"fdc2c217f153-e3e52e4fb089e81f-fe64\"},\"text\":\"Do you have any gender preference?\",\"variable\":\"gender\",\"stringId\":\"stringId_d7542a8726cc24ad\",\"label\":\"doctor gender preference\"},{\"id\":\"fdc2c217f153-e3e52e4fb089e81f-fe64\",\"type\":\"statement\",\"designer\":{\"xLocation\":794,\"yLocation\":400,\"next\":\"ec6b3a70626d-642d11516a7b0124-9a10\"},\"text\":\"Got it! I will be happy to assist.\\r\\nOne moment please...\",\"stringId\":\"stringId_27c2a1841034a527\"},{\"id\":\"ec6b3a70626d-642d11516a7b0124-9a10\",\"type\":\"action\",\"label\":\"Create call parameters action\",\"designer\":{\"xLocation\":794,\"yLocation\":460,\"next\":\"e1ff62fe13d0-339a18e0388245cb-5754\"},\"onInit\":\"switch(${gender}.entity) {\\n case \\\"No\\\":\\n ${doctorGender} = \\\"\\\";\\n break;\\n case \\\"Yes - Male\\\":\\n ${doctorGender} = \\\"gender=male\\\";\\n break;\\n default:\\n ${doctorGender} = \\\"gender=female\\\";\\n}\\n\\nswitch(${specialties}.entity) {\\n case \\\"Cardiology\\\":\\n ${doctorType} = \\\"Cardiologist\\\";\\n break;\\n case \\\"Dermatology\\\":\\n ${doctorType} = \\\"=Dermatologist\\\";\\n break;\\n case \\\"Endocrinology\\\":\\n ${doctorType} = \\\"Endocrinologist\\\";\\n break;\\n case \\\"Pediatrics\\\":\\n ${doctorType} = \\\"Pediatrician\\\";\\n break;\\n default:\\n ${doctorType} = \\\"Urologist\\\";\\n}\\n\\n\\n${user_location} = \\\"location=37.773%2C-122.413%2C100\\\";\\n\\n\"},{\"id\":\"e1ff62fe13d0-339a18e0388245cb-5754\",\"type\":\"datasource\",\"designer\":{\"xLocation\":801,\"yLocation\":536,\"errorStepId\":\"a81f16187699-54ce1a6df34e1ef7-067c\",\"next\":\"edde3ded04bb-276efc880a93de1b-001b\"},\"dataConnection\":\"\",\"urlBase\":\"https://scenariocatalogprod.azurewebsites.net\",\"urlPath\":\"/providerLookup\",\"urlParams\":\"${user_location} + '&tk=83cf6c2a-397e-4626-9b71-1f956e551939&' + ${doctorGender} + '&specialty_uid=' + ${doctorType}\",\"method\":\"get\",\"headers\":\"\",\"opJson\":true,\"opResolveWithFullResponse\":false,\"response\":\"doctors\",\"error\":\"err\"},{\"id\":\"a81f16187699-54ce1a6df34e1ef7-067c\",\"type\":\"statement\",\"designer\":{\"xLocation\":700,\"yLocation\":580},\"text\":\"JSON.stringify(${err});\",\"stringId\":\"stringId_7f726cd178d669c8\",\"label\":\"Error handling\"},{\"id\":\"edde3ded04bb-276efc880a93de1b-001b\",\"type\":\"branch\",\"condition\":\"${doctors}.data.length !== 0\",\"designer\":{\"xLocation\":867,\"yLocation\":580,\"next\":\"fab5eae17b7b-49cfac922aebbac3-b13c\"},\"targetStepId\":\"161a8d84b17a-d7225d34c7abade1-c756\"},{\"id\":\"fab5eae17b7b-49cfac922aebbac3-b13c\",\"type\":\"statement\",\"designer\":{\"xLocation\":780,\"yLocation\":694},\"text\":\"No doctors were found that meet all criteria\",\"stringId\":\"stringId_3dbb98f559a4323a\"},{\"id\":\"161a8d84b17a-d7225d34c7abade1-c756\",\"type\":\"statement\",\"designer\":{\"xLocation\":937,\"yLocation\":656},\"layout\":\"vertical\",\"attachment\":[{\"type\":\"Carousel\",\"carouselCode\":\"(function(){\\n var doctors = [];\\n for (var i =0 ; i < ${doctors}.data.length; i++) {\\n doctors.push(new builder.ThumbnailCard().title(${doctors}.data[i].name).subtitle(${doctors}.data[i].specialty).\\n text(${doctors}.data[i].clinic +\\\"\\\\n\\\" + ${doctors}.data[i].address + \\\"\\\\n\\\" + ${doctors}.data[i].hours).\\n images([builder.CardImage.create(session,${doctors}.data[i].img)]).\\n buttons([\\n builder.CardAction.postBack(session,'schedule','Schedule an appointment'),\\n builder.CardAction.postBack(session,'call','Call ' + ${doctors}.data[i].phone) \\n ]));\\n }\\n return doctors;\\n })()\\n\"}],\"label\":\"Show Cards\"}],\"returningMessage\":\"\",\"interrupting\":false,\"breaking\":false}"}